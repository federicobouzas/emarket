<Campanias>
   
    <search_list file="CampaniasSL.php">
        <searchfield name="Campania.activa" label="Activa" presentation="SINO" initialvalue="Si" />
        <searchfield name="Campania.server_id" label="Cuenta" presentation="SELECT" classparams="{'model':'Messaging.Server'}" />
        <searchfield name="Campania.prioridad" label="Prioridad" presentation="MENSAJES::PRIORIDAD_MENSAJE" />
        <searchfield name="Campania.nombre" label="Nombre" />
        <searchfield name="Campania.tipo" label="Tipo" presentation="CAMPANIAS::TIPO_CAMPANIA" />
        <searchfield name="Campania.sms" label="Usa SMS" presentation="SINO" />
        <searchfield name="Campania.estado" label="Usa Email" presentation="SINO" />
        <searchfield name="Campania.estado" label="Estado" presentation="CAMPANIAS::ESTADO_CAMPANIA" />
        
        <table>
            <column>
                <listfield name="Campania.nombre" label="Nombre" />
            </column>
            <column>
                <listfield name="Campania.activa" label="Activa" />
            </column>
            <column>
                <listfield name="Campania.server_id" label="Cuenta" presentation="SELECT" classparams="{'model':'Messaging.Server'}" />
            </column>
            <column>
                <listfield name="Campania.prioridad" label="Prioridad" presentation="MENSAJES::PRIORIDAD_MENSAJE" />
            </column>
            <column>
                <listfield name="Campania.tipo" label="Tipo" presentation="CAMPANIAS::TIPO_CAMPANIA" />
            </column>
            <column>
                <listfield name="Campania.sms" label="Usa SMS" presentation="SINO" />
            </column>
            <column>
                <listfield name="Campania.email" label="Usa Email" presentation="SINO" />
            </column>
            <column>
                <listfield name="Campania.estado" label="Estado" presentation="CAMPANIAS::ESTADO_CAMPANIA" />
            </column>
            <column>
                <listfield name="Campania.fecha_envio" label="Fecha de Envío" presentation="DATETIME" classparams="{'no_seconds':true}" />
            </column>
            <column>
                <listfield name="Campania.id" label="Probar Envío" presentation="CAMPANIAS::ENVIAR_CAMPANIA" />
            </column>
        </table>
    </search_list>
    
    <tablemaint file="CampaniasMaint.php">     
        <jsinclude file="campanias/maint_campanias.js" />

        <fieldset title="Datos de la Campaña">
            <field name="fecha_carga" label="Fecha de Carga" presentation="DATETIME" classparams="{'force':true}" isvisible="false" actions="A" />
            <field name="user_id" label="Usuario Carga" presentation="USER" classparams="{'force':true}" isvisible="false" actions="A" />
            <field name="nombre" label="Nombre" size="100" />
            <field name="activa" label="Activa" presentation="SINO" />
            <field name="tipo" label="Tipo" presentation="CAMPANIAS::TIPO_CAMPANIA" />
            <field name="encuesta_id" label="Nombre Encuesta" presentation="SELECT" classparams="{'model':'Encuesta'}" />
            <field name="evento_id" label="Nombre Evento" presentation="SELECT" classparams="{'model':'Evento'}" />
            <field name="sms" label="Usa SMS" presentation="SINO" />
            <field name="cuerpo_sms" label="Mensaje SMS" presentation="TEXTAREA" />
            <field name="email" label="Usa Email" presentation="SINO" />
            <field name="asunto_email" label="Asunto Email" size="100" />
            <field name="tmp_template" label="Subir Template" presentation="FILE" actions="A|E" />
            <field name="cuerpo_email" label="Cuerpo Email" presentation="WYSIWYG" note="Variables disponibles: #NOMBRE#, #APELLIDO#, #URL_UNSUBSCRIBE#, #URL_ENCUESTA#, #FECHA_HORA#, #LUGAR#, #URL_MAPA#, #URL_ASISTE#, #URL_NO_ASISTE#" />
        </fieldset>
        
        <fieldset title="Características de las Personas">
            <field name="personas_sexo" label="Sexo" presentation="SINO" />
            <field name="personas_edad" label="Edad" presentation="SINO" />
            <field name="personas_tipo_envio" label="Tipo Envío" presentation="CAMPANIAS::TIPO_ENVIO" />
            <field name="personas_comuna" label="Comuna" presentation="CAMPANIAS::COMUNAS_CHECKBOX" />
            <field name="personas_barrio" label="Barrio" presentation="CAMPANIAS::BARRIOS_CHECKBOX" />
            <field name="personas_poblaciones" label="Poblaciones" presentation="CAMPANIAS::POBLACIONES_CHECKBOX" />
            <field name="tmp_cantidad_personas" label="Cantidad de Personas" presentation="CAMPANIAS::CANTIDAD_PERSONAS" />
        </fieldset>
        
        <fieldset title="Programar Envío">
            <field name="server_id" label="Cuenta" presentation="SELECT" classparams="{'model':'Messaging.Server', 'conditions':{'estado':'Activo','tipo':'SMTP'}}" />
            <field name="prioridad" label="Prioridad" presentation="MENSAJES::PRIORIDAD_MENSAJE" initialvalue="3" />
            <field name="estado" label="Estado" presentation="CAMPANIAS::ESTADO_CAMPANIA" readonly="true" actions="V|E" />
            <field name="fecha_envio" label="Fecha Programada" presentation="DATETIME" classparams="{'no_seconds':true}" />
        </fieldset>
    </tablemaint>
    
</Campanias>